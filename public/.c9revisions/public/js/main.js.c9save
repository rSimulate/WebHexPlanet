{"ts":1361470288319,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"  \n\t\t\tfunction createPlanet(size) {\n\t\t\n\t\t\tvar planetgeometry\t= new THREE.IcosahedronGeometry(size, 3);\n\t\t\tvar material\t= new THREE.MeshLambertMaterial(\n\t\t\t\t\t{map: THREE.ImageUtils.loadTexture(\"images/TEWworld.jpg\")});\n\t\t\tvar mesh\t= new THREE.Mesh( planetgeometry, material ); \n\t\t\tscene.add( mesh );\n\t\t\tmesh.rotation.y += 0.02;\n\n\t\t\tvar atmopheregeometry\t= new THREE.IcosahedronGeometry(size + 0.05 , 3);\n\t\t\tvar atmospherematerial\t= new THREE.MeshLambertMaterial({\n\t\t\t\tmap: THREE.ImageUtils.loadTexture(\"images/clouds.png\"),\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\ttransparent: true,\n\t\t\t\t//opacity: 1.0\n\t\t\t\t} );\n\t\t\tvar atmospheremesh\t= new THREE.Mesh( atmopheregeometry, atmospherematerial ); \n\t\t\t\n\t\t\tscene.add( atmospheremesh );\n\t\t\tvar hexgeometry\t= new THREE.IcosahedronGeometry(size + 0.01, 3);\n\n\t\t\tsetHexUVs(hexgeometry);\n\t\t\tvar material\t= new THREE.MeshLambertMaterial({\n\t\t\t\tmap: THREE.ImageUtils.loadTexture(\"images/hex02.png\"),\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\ttransparent: true,\n\t\t\t\topacity: 0.25\n\t\t\t\t});\n\t\t\tvar hexmesh\t= new THREE.Mesh( hexgeometry, material ); \n\t\t\tscene.add( hexmesh );\n\t\t\treturn mesh;\n\t\t}\n\t\t\n\t\tfunction drawSkyBox()  {\n\t\t\n\t\t\n\t\t\tvar stargeometry = new THREE.IcosahedronGeometry(5000 , 2);\n\t\t\tvar starmaterial\t= new THREE.MeshBasicMaterial({\n\t\t\t\tmap: THREE.ImageUtils.loadTexture(\"images/MilkyWay.jpg\"),\n\t\t\t\tside: THREE.BackSide,\n\t\t\t\t} );\n\t\t\tvar starmesh\t= new THREE.Mesh( stargeometry, starmaterial ); \n\t\t\tscene.add( starmesh );\n\t\t\t\n\t\t\treturn starmesh;\n\t\t}\n\t\t\n\n\t\t\n\t\tfunction lights() {\n\t\t\tvar textureFlare0 = THREE.ImageUtils.loadTexture( \"images/lensflare/lensflare0.png\" );\n\t\t\tvar textureFlare2 = THREE.ImageUtils.loadTexture( \"images/lensflare/lensflare2.png\" );\n\t\t\tvar textureFlare3 = THREE.ImageUtils.loadTexture( \"images/lensflare/lensflare3.png\" );\n\n\t\t\taddLight( 0.995, 0.025, 0.99, -500, 0, -1000 );\n\n\t\t\tfunction addLight( h, s, v, x, y, z ) {\n\n\t\t\t\tvar light = new THREE.PointLight( 0xffffff, 1.5, 4500 );\n\t\t\t\tlight.color.setHSL( h, s, v );\n\t\t\t\tlight.position.set( x, y, z );\n\t\t\t\tscene.add( light );\n\n\t\t\t\tvar flareColor = new THREE.Color( 0xffffff );\n\t\t\t\tflareColor.setHSL( h, s - 0.5, v + 0.5 );\n\n\t\t\t\tvar lensFlare = new THREE.LensFlare( textureFlare0, 700, 0.0, THREE.AdditiveBlending, flareColor );\n\n\t\t\t\tlensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );\n\t\t\t\tlensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );\n\t\t\t\tlensFlare.add( textureFlare2, 512, 0.0, THREE.AdditiveBlending );\n\n\t\t\t\tlensFlare.add( textureFlare3, 60, 0.6, THREE.AdditiveBlending );\n\t\t\t\tlensFlare.add( textureFlare3, 70, 0.7, THREE.AdditiveBlending );\n\t\t\t\tlensFlare.add( textureFlare3, 120, 0.9, THREE.AdditiveBlending );\n\t\t\t\tlensFlare.add( textureFlare3, 70, 1.0, THREE.AdditiveBlending );\n\n\t\t\t\tlensFlare.customUpdateCallback = function lensFlareUpdateCallback( object ) {\n\n\t\t\t\t\tvar f, fl = object.lensFlares.length;\n\t\t\t\t\tvar flare;\n\t\t\t\t\tvar vecX = -object.positionScreen.x * 2;\n\t\t\t\t\tvar vecY = -object.positionScreen.y * 2;\n\n\n\t\t\t\t\tfor( f = 0; f < fl; f++ ) {\n\n\t\t\t\t\t\t   flare = object.lensFlares[ f ];\n\n\t\t\t\t\t\t   flare.x = object.positionScreen.x + vecX * flare.distance;\n\t\t\t\t\t\t   flare.y = object.positionScreen.y + vecY * flare.distance;\n\n\t\t\t\t\t\t   flare.rotation = 0;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobject.lensFlares[ 2 ].y += 0.025;\n\t\t\t\t\tobject.lensFlares[ 3 ].rotation = object.positionScreen.x * 0.5 + THREE.Math.degToRad( 45 );\n\n\t\t\t\t}\n\t\t\t\tlensFlare.position = light.position;\n\n\t\t\t\tscene.add( lensFlare );\n\n\t\t\t}\t\t\n\t\t\n\t\t}\n\t\t\n"]],"start1":0,"start2":0,"length1":0,"length2":3422}]],"length":3422}
